<!DOCTYPE html>
<html>
<head>
  <title>Bosch Rentable Bohrmaschine</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href="./app.css" rel='stylesheet' type='text/css'>
  <script src="./app.js"></script>
  <script>
    window.onload = function () {
      web3.eth.getAccounts(function (err, accs) {
        if (err != null) {
          alert("There was an error fetching your accounts.");
          return;
        }

        if (accs.length == 0) {
          alert("Couldn't get any accounts! Make sure your Ethereum client is configured correctly.");
          return;
        }

        accounts = accs;
        account = accounts[0];

        refreshBalance();

        var objIdElement = document.getElementById("_objId");
        var objId = get('objId');
        if (objId != undefined) {
          objIdElement.value = objId;
          objectId = objId;
          refreshStatus();
        }
      });
    }
  </script>
</head>
<body>
<button id="toggleAccounts" onclick="toggleAccounts()">Toggle Accounts</button>
<br>
<h1>Rentable Objects</h1>
<h2>Register or unregister your object here.</h2>
<br>
<br><label for="_objId">Object Id:</label><input type="text" id="_objId" placeholder="0x93e66d9"
                                                 onchange="refreshStatus();">
<div id="objStatus">
  <h3>Object ID is: <span class="black"><span id="objId"></span></span></h3>
  <h3>This device is <span class="black"><span id="registered"></span></span>registered.</h3>
  <h3>This device is <span class="black"><span id="rented"></span></span>rented.</h3>
</div>
<h3>Your address is <span class="black"><span id="address"></span></span></h3>
<div id="registerPage" style="display:none;">
  <h1>Register this device:</h1>
  <br><label for="_price">Price:</label><input type="number" id="_price" placeholder="e.g., 95">
  <br><label for="_amortizationPeriod">Amortization period:</label><input type="number" id="_amortizationPeriod"
                                                                          placeholder="4 weeks">
  <br><label for="_description">Object description:</label><input type="text" id="_description"
                                                                  placeholder="Bosch Bohrmaschine...">
  <br><br>
  <button id="register" onclick="registerObject()">Register Object</button>
</div>
<div id="unregisterPage" style="display:none;">
  <h1>Unregister this device:</h1>
  <br><br>
  <button id="unRegister" onclick="unregisterObject()">Unregister Object</button>
</div>
<br><br>
<span id="status"></span>

<div id="loadingDiv" style="display:none">
  <img src="./images/colorful_loading.gif">
</div>

</body>
</html>
